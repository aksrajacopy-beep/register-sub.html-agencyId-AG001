<script>
  function submitForm() {

    const agencyName = document.getElementById("agencyName").value.trim();
    const ownerName = document.getElementById("ownerName").value.trim();
    const email = document.getElementById("email").value.trim();
    const commission = document.getElementById("commission").value.trim();

    if (!agencyName || !ownerName || !email || !commission) {
      alert("❌ Please fill all fields");
      return;
    }

    const data = {
      agencyName,
      ownerName,
      email,
      commission
    };

    fetch("https://script.google.com/macros/s/AKfycbyz46WKnlf1ZHEDFxdopMzfAZYRaysaoYcq2rZAM8NorkC1NJKE3OKxfhr1s8yqJh3rZQ/exec", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify(data)
    })
    .then(res => res.json())
    .then(res => {
      document.getElementById("result").style.display = "block";

      if (res.status === "success") {
        document.getElementById("result").innerHTML =
          "✅ Registration Successful<br>Agency ID: <b>" + res.agencyId + "</b>";
      } else {
        document.getElementById("result").innerHTML = "❌ Server Error";
      }
    })
    .catch(err => {
      console.error(err);
      alert("❌ Error! Try again");
    });
  }
</script>

